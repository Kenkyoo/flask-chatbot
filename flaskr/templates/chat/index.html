<!doctype html>
<title>{% block title %}{% endblock %} - Flaskr</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
<link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css"
/>
{% extends 'base.html' %} {% block content %} {% for m in messages %}
<div class="hero-body">
    <div class="container has-text-centered">
        <article class="message">
            <div class="message-header">
                <p>Tu</p>
                <button class="delete" aria-label="delete"></button>
            </div>
            <div class="message-body">{{ m.message }}</div>
        </article>
        <article class="message">
            <div class="message-header">
                <p>Bot</p>
                <button class="delete" aria-label="delete"></button>
            </div>
            <div class="message-body">{{ m.response }}</div>
        </article>
    </div>
</div>
{% endfor %}
<div class="hero-foot">
    <input id="miInput" placeholder="Escribí un mensaje..." />
    <button onclick="enviar()">Enviar</button>
</div>
<div id="respuesta"></div>
<script>
    function enviar() {
        const valor = miInput.value;
        if (!valor.trim()) return;

        fetch("/chat", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ texto: valor }),
        })
            .then((r) => r.json())
            .then((data) => {
                respuesta.innerHTML += `<p><b>Tú:</b> ${valor}</p>
           <p><b>Bot:</b> ${data.resultado}</p>`;
                miInput.value = "";
            });
    }
</script>

{% endblock %}
